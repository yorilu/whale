(function(){var c=window.whale={},a,d=10,b=function(e,f,g){this.k=e;this.v=f;this.h=g||0;this.t=new Date()};isEmpty=function(e){return typeof e=="undefined"||e==a||e==null},getRandom=function(e){return Math.round(e*Math.random())},findElement=function(g,e){for(var f=0;f<e.length;f++){if(e[f].k==g){return e[f]}}},removeElement=function(g,e){for(var f=0;f<e.length;f++){if(e[f].k==g){return e.splice(f,1)}}},oneCacheModel=function(i,j,g){var f=[];i.size=i.size||d;var e=function(k,l){j(k,l,f)};var h=g||function(k){var l=findElement(k,f);if(l){l.h++;l.t=new Date();return l.v}};return{set:e,get:h,_remove:function(k){return removeElement(k,f)},_getCache:function(){return f},_getLength:function(){return f.length}}};c.Random=function(e){var f=function(i,j,g){removeElement(i,g);var h;if(g.length>=e.size){h=getRandom(e.size-1)}else{h=g.length}g[h]=new b(i,j)};return oneCacheModel(e,f)};c.FIFO=function(e){var f=function(h,i,g){removeElement(h,g);if(g.length>=e.size){g.shift()}g.push(new b(h,i))};return oneCacheModel(e,f)};c.LRU=function(e){var f=function(h,i,g){removeElement(h,g);if(g.length>=e.size){g.sort(function(k,j){return k.t>j.t?1:-1});g.shift()}g.push(new b(h,i))};return oneCacheModel(e,f)};c.LFU=function(e){var f=function(h,i,g){removeElement(h,g);if(g.length>=e.size){g.sort(function(k,j){return k.h>j.h?1:-1});g.shift()}g.push(new b(h,i))};return oneCacheModel(e,f)};c.TwoQueue=function(h){var f=c.LRU({size:h.size});var e=c.LRU({size:h.L2size});var i=function(j,k){f.set(j,k)};var g=function(k){var j=findElement(k,f._getCache());if(!isEmpty(j)){if(j.h>=1){var l=f._remove(k);e.set(l[0].k,l[0].v);return l[0].k}else{return f.get(k)}}return e.get(k)};return{set:i,get:g}}})();